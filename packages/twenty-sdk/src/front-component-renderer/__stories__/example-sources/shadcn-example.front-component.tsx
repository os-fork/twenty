import { useState } from 'react';
import { defineFrontComponent } from '@/sdk';

// shadcn UI outputs pre-built components that use Tailwind utility classes
// with Radix UI primitives underneath. This example simulates that pattern:
// className-based styling with a bundled CSS subset.
const SHADCN_CSS = `
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
.inline-flex{display:inline-flex}
.flex{display:flex}
.flex-col{display:flex;flex-direction:column}
.items-center{align-items:center}
.justify-center{justify-content:center}
.gap-2{gap:.5rem}
.gap-3{gap:.75rem}
.rounded-md{border-radius:.375rem}
.rounded-lg{border-radius:.5rem}
.border{border-width:1px}
.border-input{border-color:#e2e8f0}
.bg-background{background-color:#fff}
.bg-primary{background-color:#0f172a}
.bg-muted{background-color:#f1f5f9}
.bg-destructive{background-color:#ef4444}
.p-4{padding:1rem}
.p-6{padding:1.5rem}
.px-4{padding-left:1rem;padding-right:1rem}
.py-2{padding-top:.5rem;padding-bottom:.5rem}
.h-10{height:2.5rem}
.w-full{width:100%}
.text-sm{font-size:.875rem;line-height:1.25rem}
.text-lg{font-size:1.125rem;line-height:1.75rem}
.text-2xl{font-size:1.5rem;line-height:2rem}
.font-medium{font-weight:500}
.font-semibold{font-weight:600}
.text-primary{color:#0f172a}
.text-primary-foreground{color:#fff}
.text-muted-foreground{color:#64748b}
.text-destructive-foreground{color:#fff}
.shadow-sm{box-shadow:0 1px 2px 0 rgb(0 0 0/.05)}
.cursor-pointer{cursor:pointer}
.ring-offset-background{--ring-offset:0px}
.transition-colors{transition:color .15s,background-color .15s,border-color .15s}
`;

// Simulated shadcn Button component (normally generated by shadcn CLI)
const Button = ({
  children,
  variant = 'default',
  className = '',
  ...props
}: {
  children: React.ReactNode;
  variant?: 'default' | 'destructive' | 'outline';
  className?: string;
  'data-testid'?: string;
  onClick?: () => void;
}) => {
  const baseClasses =
    'inline-flex items-center justify-center rounded-md text-sm font-medium h-10 px-4 py-2 cursor-pointer transition-colors';

  const variantClasses = {
    default: 'bg-primary text-primary-foreground',
    destructive: 'bg-destructive text-destructive-foreground',
    outline: 'border border-input bg-background',
  };

  return (
    <button
      className={`${baseClasses} ${variantClasses[variant]} ${className}`}
      {...props}
    >
      {children}
    </button>
  );
};

// Simulated shadcn Card component
const Card = ({
  children,
  className = '',
  ...props
}: {
  children: React.ReactNode;
  className?: string;
  'data-testid'?: string;
}) => (
  <div
    className={`rounded-lg border border-input bg-background shadow-sm ${className}`}
    {...props}
  >
    {children}
  </div>
);

const ShadcnComponent = () => {
  const [count, setCount] = useState(0);

  return (
    <>
      <style>{SHADCN_CSS}</style>
      <Card data-testid="shadcn-component">
        <div className="flex-col gap-3 p-6">
          <h2 className="text-lg font-semibold text-primary">
            shadcn UI Component
          </h2>
          <p className="text-sm text-muted-foreground">
            Simulates the shadcn pattern: Tailwind utilities + composable
            primitives.
          </p>
          <div className="bg-muted rounded-md p-4">
            <span
              data-testid="shadcn-count"
              className="text-2xl font-semibold text-primary"
            >
              Count: {count}
            </span>
          </div>
          <div className="flex gap-2">
            <Button
              data-testid="shadcn-button"
              onClick={() => setCount((previous) => previous + 1)}
            >
              Increment
            </Button>
            <Button
              variant="outline"
              onClick={() => setCount(0)}
            >
              Reset
            </Button>
          </div>
        </div>
      </Card>
    </>
  );
};

export default defineFrontComponent({
  universalIdentifier: 'test-shadcn-0000-0000-0000-000000000008',
  name: 'shadcn-component',
  description:
    'A front component simulating the shadcn UI pattern (Tailwind + composable primitives)',
  component: ShadcnComponent,
});
